<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Paix 2026</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;900&display=swap" rel="stylesheet">
<style>
body{
margin:0;
font-family:'Poppins',sans-serif;
background:#f2f2f2;
display:flex;
flex-direction:column;
align-items:center;
padding:20px;
}
input{margin-bottom:20px}
button{
padding:12px 25px;
background:#0b7a3d;
color:white;
border:none;
border-radius:5px;
font-size:16px;
cursor:pointer;
}
canvas{display:none;}
</style>
</head>
<body>

<h2>Upload ta photo</h2>
<input type="file" id="upload" accept="image/*">
<button onclick="generateImage()">Télécharger</button>

<canvas id="canvas" width="1080" height="1080"></canvas>

<script>
let uploadedImage = null;

document.getElementById("upload").addEventListener("change", function(e){
const reader = new FileReader();
reader.onload = function(event){
const img = new Image();
img.onload = function(){
uploadedImage = img;
};
img.src = event.target.result;
}
reader.readAsDataURL(e.target.files[0]);
});

async function generate() {
  const canvas = document.getElementById("canvas");
  const ctx = canvas.getContext("2d");

  const width = 1080;
  const height = 1080;

  canvas.width = width;
  canvas.height = height;

  /* ================= FOND ================= */

  ctx.fillStyle = "#ffffff";
  ctx.fillRect(0, 0, width, height);

  /* ================= IMAGE ================= */

  const fileInput = document.getElementById("imageInput");
  const file = fileInput.files[0];

  if (!file) {
    alert("Ajoute une image d'abord.");
    return;
  }

  const img = new Image();
  img.src = URL.createObjectURL(file);

  await new Promise((resolve) => {
    img.onload = resolve;
  });

  const imgSize = 720;
  const imgX = (width - imgSize) / 2;
  const imgY = 80;

  ctx.save();
  ctx.beginPath();
  ctx.arc(width / 2, imgY + imgSize / 2, imgSize / 2, 0, Math.PI * 2);
  ctx.closePath();
  ctx.clip();

  ctx.drawImage(img, imgX, imgY, imgSize, imgSize);
  ctx.restore();

  /* ================= BLOC TEXTE ================= */

  ctx.textAlign = "center";

  let y = 860;

  /* MAIRIE DES JEUNES DE DJOUGOU (une ligne centrée) */

  ctx.font = "900 48px Poppins";

  const t1 = "MAIRIE ";
  const t2 = "DES JEUNES ";
  const t3 = "DE DJOUGOU";

  const w1 = ctx.measureText(t1).width;
  const w2 = ctx.measureText(t2).width;
  const w3 = ctx.measureText(t3).width;

  const totalWidth = w1 + w2 + w3;
  let startX = (width - totalWidth) / 2;

  ctx.fillStyle = "#1f8c3a";
  ctx.fillText(t1, startX, y);

  ctx.fillStyle = "#f2c300";
  ctx.fillText(t2, startX + w1, y);

  ctx.fillStyle = "#d91e18";
  ctx.fillText(t3, startX + w1 + w2, y);

  /* POUR LA */

  y += 60;
  ctx.fillStyle = "#333";
  ctx.font = "400 36px Poppins";
  ctx.fillText("pour la", width / 2, y);

  /* PAIX */

  y += 55;
  ctx.fillStyle = "#1f8c3a";
  ctx.font = "900 64px Poppins";
  ctx.fillText("PAIX", width / 2, y);

  /* PHRASE */

  y += 55;
  ctx.fillStyle = "#444";
  ctx.font = "400 30px Poppins";
  ctx.fillText(
    "avant, pendant et après les élections au Bénin.",
    width / 2,
    y
  );

  /* HASHTAG */

  y += 60;
  ctx.fillStyle = "#1f8c3a";
  ctx.font = "700 34px Poppins";
  ctx.fillText("#PaixAuBénin2026", width / 2, y);

  /* ================= TÉLÉCHARGEMENT ================= */

  canvas.toBlob(function (blob) {
    const link = document.createElement("a");
    link.download = "paix2026.png";
    link.href = URL.createObjectURL(blob);
    link.click();
  }, "image/png");
}
</script>

</body>
</html>
