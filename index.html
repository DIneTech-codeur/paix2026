<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Paix 2026</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;900&display=swap" rel="stylesheet">
<style>
body{
margin:0;
font-family:'Poppins',sans-serif;
background:#f2f2f2;
display:flex;
flex-direction:column;
align-items:center;
padding:20px;
}
input{margin-bottom:20px}
button{
padding:12px 25px;
background:#0b7a3d;
color:white;
border:none;
border-radius:5px;
font-size:16px;
cursor:pointer;
}
canvas{display:none;}
</style>
</head>
<body>

<h2>Upload ta photo</h2>
<input type="file" id="upload" accept="image/*">
<button onclick="generateImage()">Télécharger</button>

<canvas id="canvas" width="1080" height="1080"></canvas>

<script>
let uploadedImage = null;

document.getElementById("upload").addEventListener("change", function(e){
const reader = new FileReader();
reader.onload = function(event){
const img = new Image();
img.onload = function(){
uploadedImage = img;
};
img.src = event.target.result;
}
reader.readAsDataURL(e.target.files[0]);
});

function generateImage(){
if(!uploadedImage){
alert("Upload une photo d'abord");
return;
}

const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

ctx.clearRect(0,0,1080,1080);

/* ================= FOND ================= */

let bgGradient = ctx.createLinearGradient(0,0,1080,1080);
bgGradient.addColorStop(0,"#1f8c3a");
bgGradient.addColorStop(0.5,"#f2c300");
bgGradient.addColorStop(1,"#d91e18");
ctx.fillStyle = bgGradient;
ctx.fillRect(0,0,1080,1080);

/* ================= VAGUE BASSE ================= */

ctx.fillStyle = "#f4efe6";
ctx.beginPath();
ctx.moveTo(0,760);
ctx.quadraticCurveTo(540,700,1080,760);
ctx.lineTo(1080,1080);
ctx.lineTo(0,1080);
ctx.closePath();
ctx.fill();

/* ================= PHOTO ================= */

const centerX = 350;
const centerY = 420;

/* Halo fin tricolore */
ctx.lineWidth = 18;

/* Vert */
ctx.beginPath();
ctx.strokeStyle = "#1f8c3a";
ctx.arc(centerX,centerY,310,-Math.PI/2,Math.PI/6);
ctx.stroke();

/* Jaune */
ctx.beginPath();
ctx.strokeStyle = "#f2c300";
ctx.arc(centerX,centerY,310,Math.PI/6,5*Math.PI/6);
ctx.stroke();

/* Rouge */
ctx.beginPath();
ctx.strokeStyle = "#d91e18";
ctx.arc(centerX,centerY,310,5*Math.PI/6,3*Math.PI/2);
ctx.stroke();

/* Cercle blanc */
ctx.beginPath();
ctx.fillStyle = "white";
ctx.arc(centerX,centerY,290,0,Math.PI*2);
ctx.fill();

/* Photo clip */
ctx.save();
ctx.beginPath();
ctx.arc(centerX,centerY,270,0,Math.PI*2);
ctx.clip();

let size = Math.min(uploadedImage.width, uploadedImage.height);
let sx = (uploadedImage.width - size) / 2;
let sy = (uploadedImage.height - size) / 2;

ctx.drawImage(uploadedImage,sx,sy,size,size,80,150,540,540);
ctx.restore();

/* ================= GLOW PREMIUM ================= */

ctx.save();
ctx.beginPath();
ctx.arc(centerX, centerY, 330, 0, Math.PI * 2);
ctx.shadowColor = "rgba(31,140,58,0.45)";
ctx.shadowBlur = 60;
ctx.strokeStyle = "rgba(31,140,58,0.6)";
ctx.lineWidth = 6;
ctx.stroke();
ctx.restore();

/* ================= BADGE ================= */

ctx.save();
ctx.beginPath();
ctx.roundRect(80, 90, 340, 70, 40);
ctx.fillStyle = "rgba(255,255,255,0.9)";
ctx.fill();
ctx.restore();

ctx.fillStyle = "#1f8c3a";
ctx.font = "600 26px Poppins";
ctx.fillText("Ambassadeur Paix 2026", 105, 135);

/* ================= TEXTE DROITE OPTIMISÉ ================= */

ctx.textAlign = "left";

/* Plus de respiration */
let textX = 720;

/* Centré verticalement par rapport au cercle */
let textY = 390;

ctx.fillStyle = "#222";
ctx.font = "700 52px Poppins";
ctx.fillText("Je m’engage", textX, textY);

textY += 65;

ctx.font = "500 42px Poppins";
ctx.fillText("avec la", textX, textY);

/* ================= BLOC BLANC OPTIMISÉ ================= */

ctx.textAlign = "left";

let y = 835;

/* ================= MAIRIE DES JEUNES DE DJOUGOU ================= */

ctx.font = "900 44px Poppins";

const p1 = "MAIRIE ";
const p2 = "DES JEUNES ";
const p3 = "DE DJOUGOU";

const w1 = ctx.measureText(p1).width;
const w2 = ctx.measureText(p2).width;
const w3 = ctx.measureText(p3).width;

const total = w1 + w2 + w3;

let x = 540 - total / 2;

ctx.fillStyle = "#1f8c3a";
ctx.fillText(p1, x, y);
x += w1;

ctx.fillStyle = "#f2c300";
ctx.fillText(p2, x, y);
x += w2;

ctx.fillStyle = "#d91e18";
ctx.fillText(p3, x, y);

/* ================= POUR LA PAIX ================= */

y += 65;
ctx.font = "400 40px Poppins";

const t1 = "pour la ";
const t2 = "PAIX";

const tw1 = ctx.measureText(t1).width;
ctx.font = "900 58px Poppins";
const tw2 = ctx.measureText(t2).width;

const total2 = tw1 + tw2;

x = 540 - total2 / 2;

ctx.font = "400 40px Poppins";
ctx.fillStyle = "#333";
ctx.fillText(t1, x, y);
x += tw1;

/* Dégradé PAIX */
const gradient = ctx.createLinearGradient(x, y, x + tw2, y);
gradient.addColorStop(0, "#1f8c3a");
gradient.addColorStop(1, "#34c759");

ctx.font = "900 58px Poppins";
ctx.fillStyle = gradient;
ctx.fillText(t2, x, y);

/* ================= PHRASE ================= */

y += 65;
ctx.textAlign = "center";
ctx.font = "400 30px Poppins";
ctx.fillStyle = "#555";
ctx.fillText(
  "avant, pendant et après les élections au Bénin.",
  540,
  y
);

/* ================= HASHTAG ================= */

y += 60;
ctx.font = "700 34px Poppins";
ctx.fillStyle = "#1f8c3a";
ctx.fillText("#PaixAuBénin2026", 540, y);

/* ================= SIGNATURE ================= */

ctx.font = "500 18px Poppins";
ctx.fillStyle = "rgba(0,0,0,0.4)";
ctx.textAlign = "right";
ctx.fillText("© Paix2026 - Officiel", 1040, 1040);

/* ===== LOGO ===== */

const logo = new Image();
logo.src = "logo.png";

logo.onload = function(){

  const maxSize = 150;

  const ratio = Math.min(
    maxSize / logo.width,
    maxSize / logo.height
  );

  const logoWidth = logo.width * ratio;
  const logoHeight = logo.height * ratio;

  const logoX = 1080 - logoWidth - 60;
  const logoY = 60;

  ctx.beginPath();
  ctx.arc(logoX + logoWidth/2, logoY + logoHeight/2, 90, 0, Math.PI*2);
  ctx.fillStyle = "white";
  ctx.fill();

  ctx.drawImage(logo, logoX, logoY, logoWidth, logoHeight);

  downloadCanvas();
};

logo.onerror = function(){
  console.log("Logo non chargé");
  downloadCanvas();
};

function downloadCanvas(){
  const link = document.createElement("a");
  link.download = "paix2026.png";
  link.href = canvas.toDataURL("image/png");
  link.click();
}

}
</script>

</body>
</html>
