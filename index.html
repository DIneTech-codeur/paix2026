<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Paix 2026</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;900&display=swap" rel="stylesheet">
<style>
body{
margin:0;
font-family:'Poppins',sans-serif;
background:#f2f2f2;
display:flex;
flex-direction:column;
align-items:center;
padding:20px;
}
input{margin-bottom:20px}
button{
padding:12px 25px;
background:#0b7a3d;
color:white;
border:none;
border-radius:5px;
font-size:16px;
cursor:pointer;
}
canvas{display:none;}
</style>
</head>
<body>

<h2>Upload ta photo</h2>
<input type="file" id="upload" accept="image/*">
<button onclick="generateImage()">Télécharger</button>

<canvas id="canvas" width="1080" height="1080"></canvas>

<script>
let uploadedImage = null;

document.getElementById("upload").addEventListener("change", function(e){
const reader = new FileReader();
reader.onload = function(event){
const img = new Image();
img.onload = function(){
uploadedImage = img;
};
img.src = event.target.result;
}
reader.readAsDataURL(e.target.files[0]);
});

function generateImage(){
if(!uploadedImage){
alert("Upload une photo d'abord");
return;
}

const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

ctx.clearRect(0,0,1080,1080);

/* ================= FOND ================= */

let bgGradient = ctx.createLinearGradient(0,0,1080,1080);
bgGradient.addColorStop(0,"#1f8c3a");
bgGradient.addColorStop(0.5,"#f2c300");
bgGradient.addColorStop(1,"#d91e18");
ctx.fillStyle = bgGradient;
ctx.fillRect(0,0,1080,1080);

/* ================= VAGUE BASSE ================= */

ctx.fillStyle = "#f4efe6";
ctx.beginPath();
ctx.moveTo(0,760);
ctx.quadraticCurveTo(540,700,1080,760);
ctx.lineTo(1080,1080);
ctx.lineTo(0,1080);
ctx.closePath();
ctx.fill();

/* ================= PHOTO ================= */

const centerX = 350;
const centerY = 420;

/* Halo fin tricolore */
ctx.lineWidth = 18;

/* Vert */
ctx.beginPath();
ctx.strokeStyle = "#1f8c3a";
ctx.arc(centerX,centerY,310,-Math.PI/2,Math.PI/6);
ctx.stroke();

/* Jaune */
ctx.beginPath();
ctx.strokeStyle = "#f2c300";
ctx.arc(centerX,centerY,310,Math.PI/6,5*Math.PI/6);
ctx.stroke();

/* Rouge */
ctx.beginPath();
ctx.strokeStyle = "#d91e18";
ctx.arc(centerX,centerY,310,5*Math.PI/6,3*Math.PI/2);
ctx.stroke();

/* Cercle blanc */
ctx.beginPath();
ctx.fillStyle = "white";
ctx.arc(centerX,centerY,290,0,Math.PI*2);
ctx.fill();

/* Photo clip */
ctx.save();
ctx.beginPath();
ctx.arc(centerX,centerY,270,0,Math.PI*2);
ctx.clip();

let size = Math.min(uploadedImage.width, uploadedImage.height);
let sx = (uploadedImage.width - size) / 2;
let sy = (uploadedImage.height - size) / 2;

ctx.drawImage(uploadedImage,sx,sy,size,size,80,150,540,540);
ctx.restore();

/* ================= TEXTE DROITE ================= */

ctx.textAlign = "left";

let textX = 670;
let textY = 400;

ctx.fillStyle = "#222";
ctx.font = "700 48px Poppins";
ctx.fillText("Je m’engage", textX, textY);

textY += 60;

ctx.font = "500 40px Poppins";
ctx.fillText("avec la", textX, textY);

/* ================= BLOC BAS STRUCTURÉ PRO ================= */

ctx.textAlign = "left";
ctx.font = "900 48px Poppins";

let y = 760;

/* Texte complet sur une seule ligne */
const part1 = "MAIRIE ";
const part2 = "DES JEUNES ";
const part3 = "DE DJOUGOU";

/* Calcul largeur totale */
const w1 = ctx.measureText(part1).width;
const w2 = ctx.measureText(part2).width;
const w3 = ctx.measureText(part3).width;

const totalWidth = w1 + w2 + w3;

/* Position de départ pour centrer parfaitement */
let x = 540 - totalWidth / 2;

/* MAIRIE */
ctx.fillStyle = "#1f8c3a";
ctx.fillText(part1, x, y);
x += w1;

/* DES JEUNES */
ctx.fillStyle = "#f2c300";
ctx.fillText(part2, x, y);
x += w2;

/* DE DJOUGOU */
ctx.fillStyle = "#d91e18";
ctx.fillText(part3, x, y);

/* ================= SUITE ================= */

y += 70;
ctx.textAlign = "center";
ctx.fillStyle = "#333";
ctx.font = "400 36px Poppins";
ctx.fillText("pour la", 540, y);

y += 55;
ctx.fillStyle = "#1f8c3a";
ctx.font = "900 64px Poppins";
ctx.fillText("PAIX", 540, y);

y += 55;
ctx.fillStyle = "#444";
ctx.font = "400 30px Poppins";
ctx.fillText("avant, pendant et après les élections au Bénin.", 540, y);

y += 65;
ctx.fillStyle = "#1f8c3a";
ctx.font = "700 36px Poppins";
ctx.fillText("#PaixAuBénin2026", 540, y);
  
/* ================= LOGO ================= */

const logo = new Image();
logo.src = "logo.png";
logo.onload = function(){

ctx.beginPath();
ctx.fillStyle = "white";
ctx.arc(930,150,95,0,Math.PI*2);
ctx.fill();

ctx.drawImage(logo,855,75,150,150);

/* DOWNLOAD */
const link = document.createElement("a");
link.download = "paix2026.png";
link.href = canvas.toDataURL("image/png");
link.click();
}

}
</script>

</body>
</html>
